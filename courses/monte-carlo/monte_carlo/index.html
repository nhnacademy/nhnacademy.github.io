<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=generator content="Wowchemy 5.3.0 for Hugo">
<link rel=preconnect href=https://fonts.gstatic.com crossorigin>
<link rel=preload as=style href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,400;0,700;1,400;1,700&family=Oswald&family=Rubik:ital@0;1&display=swap">
<link rel=stylesheet href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,400;0,700;1,400;1,700&family=Oswald&family=Rubik:ital@0;1&display=swap" media=print onload="this.media='all'">
<meta name=description content="몬테카를로 방법은 여러 분야에서 시뮬레이션을 하는데 널리 쓰입니다.
일단 끝없는 순열은 쓰지 않고 계산 절차만 간추려 봅니다.
참 거짓을 답하는 함수(실험)를 n 번 시행하고 참이 나온 횟수를 n으로 나눕니다.">
<link rel=alternate hreflang=en-us href=https://nhnacademy.github.io/courses/monte-carlo/monte_carlo/>
<meta name=theme-color content="#1565c0">
<link rel=stylesheet href=/css/vendor-bundle.min.f1ecf783c14edc00c9320c205831ad8e.css media=print onload="this.media='all'">
<link rel=stylesheet href=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/styles/github.min.css crossorigin=anonymous title=hl-light media=print onload="this.media='all'">
<link rel=stylesheet href=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/styles/dracula.min.css crossorigin=anonymous title=hl-dark media=print onload="this.media='all'" disabled>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.min.css integrity crossorigin=anonymous media=print onload="this.media='all'">
<link rel=stylesheet href=/css/wowchemy.d231dcd29a7580c1286e831b6ed51236.css>
<link rel=manifest href=/manifest.webmanifest>
<link rel=icon type=image/png href=/media/icon_hua2ec155b4296a9c9791d015323e16eb5_11927_32x32_fill_lanczos_center_3.png>
<link rel=apple-touch-icon type=image/png href=/media/icon_hua2ec155b4296a9c9791d015323e16eb5_11927_180x180_fill_lanczos_center_3.png>
<link rel=canonical href=https://nhnacademy.github.io/courses/monte-carlo/monte_carlo/>
<meta property="twitter:card" content="summary">
<meta property="og:site_name" content="Academic">
<meta property="og:url" content="https://nhnacademy.github.io/courses/monte-carlo/monte_carlo/">
<meta property="og:title" content="몬테카를로 시뮬레이션 | Academic">
<meta property="og:description" content="몬테카를로 방법은 여러 분야에서 시뮬레이션을 하는데 널리 쓰입니다.
일단 끝없는 순열은 쓰지 않고 계산 절차만 간추려 봅니다.
참 거짓을 답하는 함수(실험)를 n 번 시행하고 참이 나온 횟수를 n으로 나눕니다."><meta property="og:image" content="https://nhnacademy.github.io/media/logo.svg">
<meta property="twitter:image" content="https://nhnacademy.github.io/media/logo.svg"><meta property="og:locale" content="en-us">
<meta property="article:published_time" content="2021-01-01T00:00:00+00:00">
<meta property="article:modified_time" content="2021-01-01T00:00:00+00:00">
<script src=https://cdn.jsdelivr.net/gh/osano/cookieconsent@3.1.1/build/cookieconsent.min.js integrity="sha512-yXXqOFjdjHNH1GND+1EO0jbvvebABpzGKD66djnUfiKlYME5HGMUJHoCaeE4D5PTG2YsSJf6dwqyUUvQvS0vaA==" crossorigin=anonymous></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/gh/osano/cookieconsent@3.1.1/build/cookieconsent.min.css integrity="sha512-LQ97camar/lOliT/MqjcQs5kWgy6Qz/cCRzzRzUCfv0fotsCTC9ZHXaPQmJV8Xu/PVALfJZ7BDezl5lW3/qBxg==" crossorigin=anonymous>
<script>window.addEventListener("load",function(){window.cookieconsent.initialise({palette:{popup:{background:"#1565c0",text:"rgb(255, 255, 255)"},button:{background:"rgb(255, 255, 255)",text:"#1565c0"}},theme:"classic",content:{message:"This website uses cookies to ensure you get the best experience on our website.",dismiss:"Got it!",link:"Learn more",href:"https://www.cookiesandyou.com"}})})</script>
<title>몬테카를로 시뮬레이션 | Academic</title>
</head>
<body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=c5de02de84f97b6f5006a7016071af95>
<script src=/js/wowchemy-init.min.2da3b1fa37e894630bf6de39b1b694b3.js></script>
<aside class=search-modal id=search>
<div class=container>
<section class=search-header>
<div class="row no-gutters justify-content-between mb-3">
<div class=col-6>
<h1>Search</h1>
</div>
<div class="col-6 col-search-close">
<a class=js-search href=# aria-label=Close><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a>
</div>
</div>
<div id=search-box>
<input name=q id=search-query placeholder=Search... autocapitalize=off autocomplete=off autocorrect=off spellcheck=false type=search class=form-control aria-label=Search...>
</div>
</section>
<section class=section-search-results>
<div id=search-hits>
</div>
</section>
</div>
</aside>
<div class=page-header>
<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main>
<div class=container-xl>
<div class="d-none d-lg-inline-flex">
<a class=navbar-brand href=/><img src=/media/logo.svg alt=Academic></a>
</div>
<button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label="Toggle navigation">
<span><i class="fas fa-bars"></i></span>
</button>
<div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
<a class=navbar-brand href=/><img src=/media/logo.svg alt=Academic></a>
</div>
<div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content>
<ul class="navbar-nav d-md-inline-flex">
<li class=nav-item>
<a class=nav-link href=/#posts><span>글</span></a>
</li>
<li class=nav-item>
<a class="nav-link active" href=/courses/><span>과정</span></a>
</li>
</ul>
</div>
<ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
<li class=nav-item>
<a class="nav-link js-search" href=# aria-label=Search><i class="fas fa-search" aria-hidden=true></i></a>
</li>
</ul>
</div>
</nav>
</div>
<div class=page-body>
<div class="container-fluid docs">
<div class="row flex-xl-nowrap">
<div class="col-12 col-md-3 col-xl-2 docs-sidebar">
<form class="docs-search d-flex align-items-center">
<button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation">
<div class=d-flex>
<span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">
Monte Carlo Methods
</span>
<span><i class="fas fa-chevron-down"></i></span>
</div>
</button>
<button class="form-control sidebar-search js-search d-none d-md-flex">
<i class="fas fa-search pr-2"></i>
<span class=sidebar-search-text>Search...</span>
<span class=sidebar-search-shortcut>/</span>
</button>
</form>
<nav class="collapse docs-links" id=docs-nav>
<ul class="nav docs-sidenav">
<li><a href=/courses/><i class="fas fa-arrow-left pr-1"></i>과정</a></li>
</ul>
<div class=docs-toc-item>
<a class=docs-toc-link href=/courses/monte-carlo/>Monte Carlo Methods</a>
<ul class="nav docs-sidenav">
<li><a href=/courses/monte-carlo/procedural_abstraction/>계산 절차를 간추리는 방법</a></li>
<li><a href=/courses/monte-carlo/infinite/>끝없는 계산</a></li>
<li class=active><a href=/courses/monte-carlo/monte_carlo/>몬테카를로 시뮬레이션</a></li>
<li><a href=/courses/monte-carlo/references/>참고 자료</a></li>
</ul>
</div>
</nav>
</div>
<div class="d-none d-xl-block col-xl-2 docs-toc">
<ul class="nav toc-top">
<li><a href=# id=back_to_top class=docs-toc-title>Contents</a></li>
</ul>
<nav id=TableOfContents>
<ul>
<li>
<ul>
<li><a href=#어림-값>어림 값</a></li>
<li><a href=#끝없는-실험>끝없는 실험</a></li>
<li><a href=#응용>응용</a></li>
</ul>
</li>
</ul>
</nav>
</div>
<main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role=main>
<article class=article>
<div class=docs-article-container>
<nav class="d-none d-md-flex" aria-label=breadcrumb>
<ol class=breadcrumb>
<li class=breadcrumb-item>
<a href=/>
Home
</a>
</li>
<li class=breadcrumb-item>
<a href=/courses/>
과정
</a>
</li>
<li class=breadcrumb-item>
<a href=/courses/monte-carlo/>
Monte Carlo Methods
</a>
</li>
<li class="breadcrumb-item active" aria-current=page>
몬테카를로 시뮬레이션
</li>
</ol>
</nav>
<h1>몬테카를로 시뮬레이션</h1>
<div class=article-style>
<p>몬테카를로 방법은 여러 분야에서 시뮬레이션을 하는데 널리 쓰입니다.
일단 끝없는 순열은 쓰지 않고 계산 절차만 간추려 봅니다.</p>
<p>참 거짓을 답하는 함수(실험)를 n 번 시행하고 참이 나온 횟수를 n으로 나눕니다.</p>
<p>
<i class="fas fa-clock pr-1 fa-fw"></i> 1-2 hours per week, for 8 weeks</p>
<pre><code class=language-python>def monte_carlo( n_trials, truths ):
    return sum( [ truths() for i in range( n_trials+1 ) ] )  / n_trials
</code></pre>
<h3 id=어림-값>어림 값</h3>
<p>몬테카를로 방식으로 ${\pi}$ 값을 어림잡을 수 있습니다. 두 마구잡이 수가 서로 소인지 알아보는 함수를 만듭니다.</p>
<pre><code class=language-python>from math import gcd, sqrt
from random import randint

def dirichlet_test():
    return gcd( randint(1, 1000), randint(1, 1000) ) == 1
</code></pre>
<p>몬테카를로 방식으로 값을 구합니다.</p>
<pre><code class=language-python>def quess_pi( n_trials ):
    return sqrt( 6 / monte_carlo( n_trials, dirichlet_test ) )

print( quess_pi( 100_000 ))
</code></pre>
<pre><code>3.139623287689948
</code></pre>
<p>십만 번 정도 시행하면 ${\pi}$ 값에 다가갑니다.</p>
<h3 id=끝없는-실험>끝없는 실험</h3>
<p>몬테카를로 실험에 iterator 기법을 적용해 봅니다.</p>
<p>먼저 어떤 함수의 계산 값을 끝없이 늘어놓은 함수를 만듭니다.</p>
<pre><code class=language-python>def repeat( f ):
    while True:
        yield( f() )
</code></pre>
<pre><code class=language-python>from numpy.random import randint, random, normal

print_iterator( take( 10, repeat( random ) ) )
</code></pre>
<pre><code>0.9280550225904395 0.22280097961036138 0.10318922203641656 0.5838716457253749 0.03550028920191295 0.36444575313103367 0.3816809748705672 0.326481870159794 0.4301836750394781 0.24527212163771261 
</code></pre>
<p>몬테카를로 iterator를 정의합니다.
오로지 계산 방법 그 자체만을 있는 그대로 표현한 코드를 쓸 수 있습니다.
계산 시간(횟수)와 계산 공간 문제 곧 계산 자원 문제를 계산 방법으로부터 격리할 수 있습니다.</p>
<pre><code class=language-python>def monte_carlo( experiment ):
    n, sums = 0, sum( repeat( experiment ) ) 
    for s in sums:
        n = n + 1
        yield( s / n )
</code></pre>
<p>$\pi$ 값으로 끝없이 수렴하는 수열을 표현할 수 있습니다.</p>
<pre><code class=language-python>from math import gcd, sqrt

pi = map( lambda x: 0 if x == 0 else sqrt( 6 / x ), monte_carlo( dirichlet_test ) )
</code></pre>
<p>끝없는 수열 pi에서 10만 번째 값만 뽑습니다.</p>
<pre><code class=language-python>print( index( 100_000, pi) )
</code></pre>
<pre><code>3.1405936558730163
</code></pre>
<h3 id=응용>응용</h3>
<p>Iterator 패턴과 몬테카를로 방법을 실제 어떻게 쓰는지 그 장단점을 또렷이 드러내는 본보기로 약재와 약물의 관계를 모의 실험하는 예제를 다룹니다. 특히 끝없는 이어지는 데이터를 순열(스트림)로 간추리는 기법은 시계열 데이터 시뮬레이션을 다루는 데 잘 들어맞습니다. 특히 이동 통신 환경에서 통신망 저편에서 흘러 들어오는 수백 개의 센서 데이터 스트림을 떠올려 보면 어렵지 않게 끝없는 데이터 순열을 떠올릴 수 있습니다.<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></p>
<h4 id=확률-분포>확률 분포</h4>
<p>시뮬레이션에서는 가짜(의사) 마구잡이 수(난수)를 정해진 분포에 따라 늘어 놓은 일이 필요합니다.
repeat 함수로 널리 쓰이는 이항, 균등, 정상 분포 함수를 준비합니다.<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup></p>
<pre><code class=language-python>def binomial_distribution( success_ratio ):
    if success_ratio &lt; 0 or success_ratio &gt; 1:
        raise ValueError( &quot;binomial_distribution: &quot;
                         + &quot;success ratio is out of range ( 0 to 1 only )&quot; )
    return repeat( lambda : random() &lt;= success_ratio )
# binomial_distribution( 1.2 ) # error!
# print_iterator( take( 10, binomial_distribution( 0.5 ) ) )

def discrete_uniform_distribution( low, high ):
    return repeat( lambda: randint( low, high + 1 ) )
# print_iterator( take( 10, discrete_uniform_distribution( 1, 4 ) ) )

def normal_distribution( mean, standard_deviation ):
    return repeat( lambda: normal( mean, standard_deviation))
</code></pre>
<h4 id=약효-시뮬레이션>약효 시뮬레이션</h4>
<p>확률 분포와 몬테카를로 방법으로 재밌는 실험을 할 수 있습니다.
돌림병을 치료하는데 꼭 필요한 약초가 있다고 합시다.<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup></p>
<p>좋은 약초를 발견할 확률이 herb_ratio일 때 마구잡이 수를 뽑아 이 값과 크기를 비교하면 참 거짓을 정할 수 있습니다.
이를 연속 시행하면 참 거짓의 이항 분포를 얻을 수 있습니다.
좋은 약초 발견 가능성을 이항 분포로 뽑아냅니다.</p>
<pre><code class=language-python>herb_ratio = 0.2
herb_availablities = binomial_distribution(herb_ratio)
</code></pre>
<p>약초의 품질을 넷으로 나눕니다.</p>
<pre><code class=language-python>Excellent, Good, Marginal, Poor = 0, 1, 2, 3
</code></pre>
<p>좋은 약초는 Excellent 품질. 좋은 약초가 없으면 다른 약초를 여럿 섞어서 대신 쓰는데 그 품질이 고르지 않습니다.
좋은 약초가 있느냐 없느냐에 따른 약초의 효과를 어림잡는 함수를 만듭니다.</p>
<pre><code class=language-python>def guess_quality( qualities ):
    return lambda isavailable: Excellent if isavailable else next( qualities )
</code></pre>
<p>guess_quality가 함수를 값으로 내놓고 있다는 걸 눈여겨 보아야 합니다.
이런 표현을 쓰면 간결한 코드를 쓸 수 있습니다. 하지만 코드를 읽기 어렵게 만들 수 있습니다.</p>
<p>네 가지 품질 가운데 하나가 고르게 뽑히도록 이산 균등 분포를 씁니다.</p>
<pre><code class=language-python>herb_qualities = map(  guess_quality( 
                                     discrete_uniform_distribution(
                                         Excellent, Poor ) ),
                       herb_availablities )
</code></pre>
<p>약초 품질에 따라 약물의 효과가 갈리지만 약초 품질이 고르지 않으므로 약물의 효과도 편차가 있는 것이 자연스럽습니다.
실감나는 시뮬레이션을 위해서 약물 효과를 네 가지로 분류하되 그 또한 마구잡이로 약효에 편차가 생기도록 네 가지 정상 분포로 표현합니다.</p>
<pre><code class=language-python>effect_distributions_by_quality = [ 
    normal_distribution( mean, standard_deviation )
    for ( mean, standard_deviation ) in [
        ( 90, 10 ),
        ( 80, 20 ),
        ( 50, 30 ),
        ( 30, 40 )
    ]]
</code></pre>
<p>약초의 품질에 따른 약물 효과를 마구잡이로 뽑는 함수를 만듭니다.
약물 효과는 0에서 100사이 값이므로 이 범위를 넘는 값을 잘라냅니다.</p>
<pre><code class=language-python>def quess_effect_from( quality ):
   guess = next( effect_distributions_by_quality [ quality ] )
   if guess &lt; 0: return 0 
   elif guess &gt; 100: return 100
   return guess
</code></pre>
<p>약초의 품질로부터 약효를 끝없이 계산하는 순열 effects를 정의합니다.</p>
<pre><code class=language-python>effects = map( quess_effect_from, herb_qualities )
</code></pre>
<h5 id=계산>계산</h5>
<p>계산이 시작되려면 시행 횟수를 정해서 약물 효과 추정치를 뽑아내고 계산 결과를 목록에 저장해야 합니다. 계산하는 방법만 적었지 실제 계산을 하지는 않았기 때문에 계산 방식을 저장해둔 계산 환경 자원을 빼면 계산하는 과정에서 필요한 계산 자원이 조금도 소비되지 않았다는 사실을 정확히 인식하고 이해하는 것이 중요합니다. 계산하는 방법과 계산을 나누면 어떤 방식으로 프로그램을 설계할 수 있는지가 잘 드러나 있습니다.</p>
<p>take로 7000번 계산을 합니다. 끝없는 계산 순열 effect가 7000번으로 끝나도록 만든 뒤에 계산 결과를 순서대로 하나씩 목록에 저장합니다. 계산 순열 effects에는 다른 계산 순열 herb_qualities가 연결되어 있고 이는 다시 herb_avaliablities로 연결되어 있기 때문에 한 계산이 다른 계산으로 이어집니다.</p>
<pre><code class=language-python>number_of_trials = 7000
neffects = take( number_of_trials, effects )
</code></pre>
<p>약물 효과 시뮬레이션한 결과를 막대 그래프로 표현할 수 있습니다.</p>
<pre><code class=language-python>import matplotlib.pyplot as plot

plot.hist( neffects, rwidth=0.9 )
plot.xlabel(&quot;Potion effect&quot;)
plot.ylabel(&quot;# Samples&quot;)
plot.grid()
plot.show()
</code></pre>
<p>
<figure>
<div class="d-flex justify-content-center">
<div class=w-100><img src=monte_carlo_01.png alt=png loading=lazy data-zoomable></div>
</div></figure>
</p>
<h4 id=상태가-필요해>상태가 필요해</h4>
<p>약효 모의 실험은 잘 되지만 실험은 결과 만큼 과정에 대한 정보도 중요합니다.
계산 과정에 쓴 데이터들 곧 약초와 품질, 그에 따른 약물의 품질,
그리고 약효에 대한 데이터가 될 수 있는 한 상세하게 보고서로 나와야
쓸모있는 실험이 됩니다. Iterator를 쓰는 코드 얼개를 조금도 망가뜨리지 않고 필요한 정보만 저장했다가 꺼내보는 방법이 필요합니다.</p>
<p>계산과 저장을 가능한 하지 않고 미루는 방식과 계산 과정에서 얻은 정보를 적절히 저장하는 두 가지 다른 방식을 한 데 엮어 쓰는 본보기가 됩니다. 문제는 그에 맞는 풀이 방법이 제 각기 다를 수 있습니다. 굳이 한 가지 방법만을 고집할 필요가 없습니다.</p>
<h5 id=몬테카를로-클래스>몬테카를로 클래스</h5>
<p>Iterator로 동작하는 모듈을 만들 수 있습니다.
<strong>iter</strong>, <strong>next</strong> 메소드를 구현하면 됩니다.
모듈을 만드는 __init__에서 모의 실험과 분포의 이름을 받습니다.
이렇게 만들면 인자로 받은 순열 experiments와 다를 바 없이 iterator처럼 값을
끝없이 늘어놓으면서도, __next__할 때마다 계산 과정에서 얻은 데이터 곧 횟수와 합을
저장하기 때문에 필요할 때 꺼내 쓸 수 있습니다.</p>
<pre><code class=language-python>
class MonteCarlo:
    def __init__( self, experiments, name_of_experiment = &quot;&quot;,  name_of_distribution = &quot;&quot; ):
        self.name_of_experiment = name_of_experiment
        self.experiments = experiments
        self.name_of_distribution = name_of_distribution
        self.number_of_trials = 0
        self.sum = 0
        
    def __iter__( self ):
        self.number_of_trials = 0
        return self
    
    def __next__(self):
        outcome = next( self.experiments )
        self.sum += outcome 
        self.number_of_trials += 1;
        return outcome
    
    def mean( self ):
        if self.number_of_trials == 0:
            raise  BaseException(&quot;0 trials&quot;)
        else:
            return self.sum / self.number_of_trials

    def report( self ):
        print( self.number_of_trials, self.name_of_experiment,
                &quot;samples were taken by&quot;, self.name_of_distribution )
        print( &quot;The mean was&quot;, self.mean() )
</code></pre>
<p>함수로 만든 monte_carlo와 쓰임새가 같다는 것을 보이기 위해서 MonteCarlo 클래스로 $\pi$ 값을 어림잡아 봅니다.</p>
<pre><code class=language-python>dirichlet_test_experiments = MonteCarlo( repeat( dirichlet_test ), &quot;dirichlet_test&quot; )
take( 100_1000, dirichlet_test_experiments )
print( sqrt( 6 / dirichlet_test_experiments.mean() ) )
</code></pre>
<pre><code>3.1411359422489764
</code></pre>
<h5 id=변해도-되는-것과-변하지-않는-것>변해도 되는 것과 변하지 않는 것</h5>
<p>코드 구조가 조금도 바뀌지 않았습니다.
MonteCarlo 클래스로 모듈을 만들어 필요할 때마다 iterator에 덧 씌우는 코드 말고는
달라진 부분이 거의 없습니다.
하지만 이 번에는 단계별 정보를 저장할 준비가 되어 있습니다.</p>
<pre><code class=language-python>herb_ratio = 0.2
herb_availablities = MonteCarlo(binomial_distribution(herb_ratio),
                                &quot;herb availabilties&quot;, &quot;binomial distribution&quot;)

Excellent, Good, Marginal, Poor = 0, 1, 2, 3

def guess_quality( qualities ):
    return lambda isavailable: Excellent if isavailable else next( qualities )

herb_qualities = MonteCarlo(
    map( guess_quality( discrete_uniform_distribution( Excellent, Poor ) ),
        herb_availablities ),
    &quot;potion quality&quot;, &quot;discrete uniform distribution&quot; )

effect_distributions_by_quality = [
    MonteCarlo( normal_distribution( mean, standard_deviation ),
                quality + &quot; effect&quot;, &quot;normal distribution&quot;)
    for ( quality, mean, standard_deviation ) in [
        ( &quot;excellent&quot;, 90, 10 ),
        ( &quot;good&quot;, 80, 20 ),
        ( &quot;marginal&quot;, 50, 30 ),
        ( &quot;poor&quot;, 30, 40 )
    ]]

def quess_effect_from( quality ):
    guess = next( effect_distributions_by_quality [ quality ] )
    if guess &lt; 0: return 0 
    elif guess &gt; 100: return 100
    return guess

effects = map( quess_effect_from, herb_qualities )

number_of_trials = 7000
neffects = take( number_of_trials, effects )
</code></pre>
<h5 id=모의-실험-보고서>모의 실험 보고서</h5>
<p>모든 계산이 마무리되었으므로 계산 결과를 볼 수 있습니다. MonteCarlo 클래스가 없다면 계산 순열을
끝없이 늘어놓는 일과 계산 과정을 기록하는 일, 이 둘을 한 꾸러미로 묶어내기가 (언제나 그렇듯이 한
방법으로 다른 방법을 완전히 대체하는 할 수 있지만) 무척 번거롭습니다. 문제마다 알맞은 방법을 골라서 서로
잘 어울리도록 짜 맞추면 프로그램의 얼개가 아주 튼튼해집니다. 성능을 시험하고 고장난 곳을 찾아서 고치기에도 좋은 짜임새를 갖추게 됩니다.</p>
<p>좋은 약초를 얻을 확률은 얼마나 될까요?</p>
<pre><code class=language-python>print( &quot;Herb availability: &quot;)
herb_availablities.report()
print()
</code></pre>
<pre><code>Herb availability: 
7000 herb availabilties samples were taken by binomial distribution
The mean was 0.2012857142857143
</code></pre>
<p>좋은 약초가 있고 없고에 따른 약재의 품질은 어떤가요?</p>
<pre><code class=language-python>print( &quot;Herb quality (Excellent = 0, Good = 1, Marginal = 2, Poor = 3): &quot;)
herb_qualities.report()
print()
</code></pre>
<pre><code>Herb quality (Excellent = 0, Good = 1, Marginal = 2, Poor = 3): 
7000 potion quality samples were taken by discrete uniform distribution
The mean was 1.197857142857143
</code></pre>
<p>약초 품질에 따른 약물의 효과는 어떻게 분포되나요?</p>
<pre><code class=language-python>print( &quot;Potion effects by the 4 quality categories: &quot;)
for quality in [ Excellent, Good, Marginal, Poor ]:
    effect_distributions_by_quality[ quality ].report()
    print()
</code></pre>
<pre><code>Potion effects by the 4 quality categories: 
2814 excellent effect samples were taken by normal distribution
The mean was 89.90235117145805

1379 good effect samples were taken by normal distribution
The mean was 79.81417545995487

1415 marginal effect samples were taken by normal distribution
The mean was 49.968438883249995

1392 poor effect samples were taken by normal distribution
The mean was 29.315780545260804
</code></pre>
<p>마찬가지로 히스토그램 막대그래프를 찍어 봅니다.</p>
<pre><code class=language-python>import matplotlib.pyplot as plot

plot.hist( neffects, rwidth=0.9 )
plot.xlabel(&quot;Potion effect&quot;)
plot.ylabel(&quot;# Samples&quot;)
plot.grid()
plot.show()
</code></pre>
<p>
<figure>
<div class="d-flex justify-content-center">
<div class=w-100><img src=monte_carlo.png alt=png loading=lazy data-zoomable></div>
</div></figure>
</p>
<section class=footnotes role=doc-endnotes>
<hr>
<ol>
<li id=fn:1 role=doc-endnote>
<p>이 다음 단계인 시계열 데이터 시뮬레이션 곧 Quasi-Continous Simulation 문제에서 다루기로 합니다. 1기 자바 웹 서비스 개발자 과정에는 공식 교과로 포함되지 않습니다. 실무 개발자 과정에 앞선 기초 이수 과목 포함되어야 하는 내용이기 때문입니다.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
<li id=fn:2 role=doc-endnote>
<p>확률 분포를 이해하고 그에 따라 마구잡이 수를 진짜 마구잡이에 가깝게 뽑아내는 일은 시뮬레이션 나아가서 인공지능 기술의 바탕입니다.
여기서는 더 깊이 다루지 못하지만 따로 반드시 잘 쓸 수 있도록 익혀 두어야 합니다.
[같은 예제를 Ruby 언어로 구현한 코드에서 확률 분포를 구현한 코드][kizoo22]를 볼 수 있습니다.&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
<li id=fn:3 role=doc-endnote>
<p>Wolfgang Kreutzer, &ldquo;System Simulation Programming Styles and Languages,&rdquo; 1986, pp. 17-29&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
</ol>
</section>
</div>
<div class=article-widget>
<div class=post-nav>
<div class=post-nav-item>
<div class=meta-nav>Previous</div>
<a href=/courses/monte-carlo/infinite/ rel=next>끝없는 계산</a>
</div>
<div class=post-nav-item>
<div class=meta-nav>Next</div>
<a href=/courses/monte-carlo/references/ rel=prev>참고 자료</a>
</div>
</div>
</div>
</div>
<div class=body-footer>
<p>Last updated on 2021년 01월 01일</p>
</div>
</article>
<footer class=site-footer>
<p class=powered-by>
© 2021-2022 NHN Acadmy Corp. All Rights Reserved.
</p>
<p class=powered-by>
<span class=float-right aria-hidden=true>
<a href=# class=back-to-top>
<span class=button_icon>
<i class="fas fa-chevron-up fa-2x"></i>
</a>
</p>
</footer>
</main>
</div>
</div>
</div>
<div class=page-footer>
</div>
<div id=modal class="modal fade" role=dialog>
<div class=modal-dialog>
<div class=modal-content>
<div class=modal-header>
<h5 class=modal-title>Cite</h5>
<button type=button class=close data-dismiss=modal aria-label=Close>
<span aria-hidden=true>&#215;</span>
</button>
</div>
<div class=modal-body>
<pre><code class="tex hljs"></code></pre>
</div>
<div class=modal-footer>
<a class="btn btn-outline-primary my-1 js-copy-cite" href=# target=_blank>
<i class="fas fa-copy"></i> Copy
</a>
<a class="btn btn-outline-primary my-1 js-download-cite" href=# target=_blank>
<i class="fas fa-download"></i> Download
</a>
<div id=modal-error></div>
</div>
</div>
</div>
</div>
<script src=/js/vendor-bundle.min.b73dfaac3b6499dc997741748a7c3fe2.js></script>
<script src=https://cdn.jsdelivr.net/gh/desandro/imagesloaded@v4.1.4/imagesloaded.pkgd.min.js integrity="sha512-S5PZ9GxJZO16tT9r3WJp/Safn31eu8uWrzglMahDT4dsmgqWonRY9grk3j+3tfuPr9WJNsfooOR7Gi7HL5W2jw==" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/metafizzy/isotope@v3.0.6/dist/isotope.pkgd.min.js integrity="sha512-Zq2BOxyhvnRFXu0+WE6ojpZLOU2jdnqbrM1hmVdGzyeCa1DgM3X5Q4A/Is9xA1IkbUeDd7755dNNI/PzSf2Pew==" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/highlight.min.js integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/r.min.js crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/python.min.js crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/latex.min.js crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/sh.min.js crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/bash.min.js crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/makefile.min.js crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/c-like.min.js crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/cpp.min.js crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/java.min.js crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/ruby.min.js crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/julia.min.js crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/javascript.min.js crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/haskell.min.js crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/scheme.min.js crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/lisp.min.js crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/coffeescript.min.js crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/go.min.js crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/markdown.min.js crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/css.min.js crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/xml.min.js crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/yaml.min.js crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/toml.min.js crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/dockerfile.min.js crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.min.js integrity crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/bryanbraun/anchorjs@4.2.2/anchor.min.js integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin=anonymous></script>
<script>anchors.add()</script>
<script id=search-hit-fuse-template type=text/x-template>
        <div class="search-hit" id="summary-{{key}}">
          <div class="search-hit-content">
            <div class="search-hit-name">
              <a href="{{relpermalink}}">{{title}}</a>
              <div class="article-metadata search-hit-type">{{type}}</div>
              <p class="search-hit-description">{{snippet}}</p>
            </div>
          </div>
        </div>
      </script>
<script src=https://cdn.jsdelivr.net/gh/krisk/Fuse@v3.2.1/dist/fuse.min.js integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/julmot/mark.js@8.11.1/dist/jquery.mark.min.js integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin=anonymous></script>
<script src=/en/js/wowchemy.min.7cd6ec29d281a73c92a2958a1584aadc.js></script>
<script async defer src=https://buttons.github.io/buttons.js></script>
</body>
</html>